---
title: status의 원리
date: 2025-05-25 22:47:00 +0900
categories: [Git, Principal]
tags: [Git, Principal]
toc: true
---

### **1. Git의 3가지 핵심 공간**

Git은 파일의 변경 상태를 추적하기 위해 아래 3가지 공간을 사용한다:

| 구분                              | 설명                                         | 별칭                                           |
| --------------------------------- | -------------------------------------------- | ---------------------------------------------- |
| 워킹 디렉토리 (Working Directory) | 사용자가 실제로 파일을 수정하는 로컬 폴더    | 워크 트리 (Work Tree)                          |
| 인덱스 (Index)                    | 커밋할 준비가 된 파일을 임시로 저장하는 공간 | 스테이징 에어리어 (Staging Area), 캐시 (Cache) |
| 리포지토리 (Repository)           | 커밋된 파일이 영구 저장되는 Git 내부 공간    | -                                              |

> 💡 이 구조는 Git의 동작 원리를 이해하는 데 가장 기본이 되는 개념이다.

---

### **2. `git status`가 상태를 판단하는 원리**

#### **변경 감지는 어떻게 할까?**

Git은 파일의 변경 여부를 **SHA-1 해시값**으로 판단한다. 구체적으로는 다음과 같은 비교를 수행한다:

1. **워킹 디렉토리 ↔ 인덱스**: 파일이 수정되었는지 확인 → `modified`
2. **인덱스 ↔ 최신 커밋**: 커밋이 필요한지 확인 → `staged`

즉, Git은 워킹 디렉토리, 인덱스, 커밋 간의 **해시값 차이**를 통해 정확히 파일 상태를 추적한다.

---

### **3. 상태별 구분 요약**

| 상태       | 설명                                       | `git status` 결과   |
| ---------- | ------------------------------------------ | ------------------- |
| Modified   | 파일은 수정되었으나 인덱스에 등록되지 않음 | `modified`로 표시   |
| Staged     | 수정된 파일이 `git add`로 인덱스에 등록됨  | `staged`로 표시     |
| Unmodified | 파일 내용이 인덱스 및 커밋과 동일          | "nothing to commit" |

---

### **4. `git commit`의 내부 작동**

`git commit` 명령어를 실행하면, 인덱스에 등록된 파일들의 정보가 **새로운 커밋 오브젝트**로 리포지토리에 저장된다. 이때:

- 커밋 트리가 업데이트되며
- 워킹 디렉토리, 인덱스, 리포지토리의 상태가 모두 동일해지고
- `git status`는 "커밋할 변경 사항 없음"을 출력한다

> 🧠 커밋이 완료되면 Git은 "작업 완료" 상태로 간주한다.

---

### **5. 용어 다시 정리**

| 용어                  | 의미                                         |
| --------------------- | -------------------------------------------- |
| 워크 트리 (Work Tree) | 워킹 디렉토리, 실제 작업 공간                |
| 인덱스 (Index)        | 스테이징 에어리어, 커밋 준비 공간            |
| 캐시 (Cache)          | 인덱스의 또 다른 표현                        |
| 커밋 (Commit)         | 인덱스의 스냅샷을 리포지토리에 저장하는 행위 |

---

### **마무리 요약**

- Git은 **워킹 디렉토리**, **인덱스**, **리포지토리**의 3단계 구조를 통해 파일 상태를 관리한다.
- `git status`는 이들 간의 **해시값 차이**를 비교하여 상태를 판단한다.
- `git add` → 인덱스 등록 → `git commit` → 리포지토리에 저장
- 인덱스를 정확히 이해하면 Git이 더 이상 두렵지 않다!

---

> 💡 **팁**: 시각적으로 이해하고 싶다면 다음과 같은 도구를 사용해 보자:
>
> - [GitUp](https://gitup.co/) (macOS용)
> - [Sourcetree](https://www.sourcetreeapp.com/)
>
> Git 상태의 변화를 실시간으로 확인할 수 있어 학습에 큰 도움이 된다!
